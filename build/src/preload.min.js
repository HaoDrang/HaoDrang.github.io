function Preload() {
}

function PreloadProgressBar(a, b, c, d, e, f, g, h, i, j, k) {
    this.posX = a, this.poxY = b, this.w = c, this.h = d, this.radius = e, this.offsetx = f, 
    this.offsety = g, this.color = createjs.Graphics.getRGB(h, i, j, k), this.strokecolor = createjs.Graphics.getRGB(0, 0, 0, 1), 
    this.bgcolor = createjs.Graphics.getRGB(200, 200, 200, 1);
}

function resizeCanvas(a) {
    var b = a.canvas, c = 0, d = 0, e = CANVAS_W, f = CANVAS_H;
    c = jQuery(window).width(), d = jQuery(window).height();
    var g = 1;
    e / f > c / d ? (g = c / e, b.width = c, b.height = g * f) : (g = d / f, b.height = d, 
    b.width = g * e), rescaleStage(a, g);
}

function rescaleStage(a, b) {
    a.scaleX = a.scaleY = b, a.update();
}

var CANVAS_W = 490, CANVAS_H = 700;

Preload.prototype = new createjs.Container(), Preload.prototype.container_initialize = Preload.prototype.initialize, 
Preload.prototype.initialize = function() {
    this.container_initialize();
    var a = document.createElement("canvas");
    document.body.appendChild(a), a.id = "gameCanvas", a.style.display = "block", a.style.margin = "0 auto", 
    a.width = CANVAS_W, a.height = CANVAS_H, console.log("game canvas created...");
    var b = new createjs.Stage(a);
    console.log("stage is ready..."), this.buildUI(b), resizeCanvas(b), jQuery(window).resize(function() {
        resizeCanvas(b), progressBar.updateProgress(0, 100), console.log("width :" + b.canvas.width + " , height : " + b.canvas.height);
    });
};

var drawNet = function(a) {
    for (var b = 0; 10 > b; b++) for (var c = 0; 10 > c; c++) {
        var d = new createjs.Shape();
        d.graphics.beginFill(createjs.Graphics.getRGB(200, 100, 100, 1)).drawCircle(100 * b, 100 * c, 5), 
        a.addChild(d);
    }
};

Preload.prototype.buildUI = function(a) {
    var b = CANVAS_W - 40, c = 30, d = (CANVAS_W - b) / 2, e = (CANVAS_H - c) / 2;
    progressBar = new PreloadProgressBar(d, e, b, c, 5, 2, 2, 80, 200, 80, 1), progressBar.scaleX = progressBar.scaleY = a.scaleX, 
    a.addChild(progressBar), progressBar.updateProgress(0, 100), a.update(), console.log("x " + progressBar.x + " y:" + progressBar.y), 
    console.log("stage " + a.canvas.width + "  " + a.canvas.height);
}, PreloadProgressBar.prototype = new createjs.Shape(), PreloadProgressBar.prototype.updateProgress = function(a, b) {
    this.graphics.beginFill(this.strokecolor).drawRoundRect(this.posX, this.poxY, this.w, this.h, this.radius, this.radius, this.radius, this.radius), 
    this.graphics.beginFill(this.bgcolor).drawRoundRect(this.posX + this.offsetx, this.poxY + this.offsety, this.w - 2 * this.offsetx, this.h - 2 * this.offsety, this.radius, this.radius, this.radius, this.radius), 
    this.graphics.beginFill(this.color).drawRoundRect(this.posX + this.offsetx, this.poxY + this.offsety, this.w - 2 * this.offsetx, this.h - 2 * this.offsety, this.radius, this.radius, this.radius, this.radius), 
    this.graphics.endFill(), console.log("ProgressBar pos X:" + this.x + ", Y:" + this.y), 
    console.log();
};